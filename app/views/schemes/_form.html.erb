<div class="well">
<%= form_for @scheme, :html => {:class => "form-horizontal"} do |f| %>
  <% if @scheme.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@scheme.errors.count, "error") %> prohibited this scheme from being saved:</h2>

      <ul>
      <% @scheme.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  
  <div class="control-group">
    <%= f.label :from_file_true, "Upload from JSON file", :class => "radio inline" do %>
      <%= f.radio_button(:from_file, "true") %>
      Upload from file
    <% end %>
    <%= f.label :from_file_false, "Fill out form", :class => "radio inline" do %>
      <%= f.radio_button :from_file, "false" %>
      Fill out form
    <% end %>
  </div>
  
  <div class="control-group from_file_fields">
    <%= f.label :json_scaffold, "Source File:" %>
    <%= f.file_field :json_scaffold %>
  </div>

  <div class="not_from_file_fields">
    <%= f.fields_for @scheme.schemer_columns do |column_form| %>
	  <div class="control-group">
		<%= column_form.label :dataset %><br />
		<% @collection_names = Mongoid.default_session.collections.map(&:name).sort %>
		<%= column_form.text_field :dataset %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :column %><br />
		<%= column_form.text_field :column %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :conditional %><br />
		<%= column_form.text_field :conditional %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :keypart %><br />
		<%= column_form.text_field :keypart %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :alias %><br />
		<%= column_form.text_field :alias %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :datatype %><br />
		<%= column_form.text_field :datatype %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :filltype %><br />
		<%= column_form.text_field :filltype %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :sm %><br />
		<%= column_form.text_field :sm %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :default %><br />
		<%= column_form.text_field :default %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :conversion %><br />
		<%= column_form.text_field :conversion %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :validation %><br />
		<%= column_form.text_field :validation %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :options %><br />
		<%= column_form.text_field :options %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :label %><br />
		<%= column_form.text_field :label %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :display %><br />
		<%= column_form.text_field :display %>
	  </div>
	  <div class="control-group">
		<%= column_form.label :characteristics %><br />
		<%= column_form.text_field :characteristics %>
	  </div>
	<% end %>
  </div>
  <div class="actions">
    <%= f.submit "Create Scheme", :class => "btn btn-primary" %>
  </div>
<% end %>
</div>